{"ast":null,"code":"import React,{useState,useEffect}from'react';import{Helmet}from'react-helmet';import NewsGrid from'./NewsGrid';import TopicSidebar from'./TopicSidebar';import'./Dashboard.css';import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=_ref=>{let{selectedLanguage}=_ref;const[news,setNews]=useState([]);const[loading,setLoading]=useState(true);const[searchQuery,setSearchQuery]=useState('');const[selectedTopic,setSelectedTopic]=useState('Technology');// Temporary hardcoded API key for testing\nconst API_KEY='928dbbf6af0cb1e827f0c93aa9b70f1e';const fetchNews=async topic=>{try{setLoading(true);let url;const topicToCategory={'Technology':'technology','Politics':'world','Economy':'business','Health':'health','Environment':'science'};if(searchQuery){url=`https://gnews.io/api/v4/search?q=${encodeURIComponent(searchQuery)}&lang=en&country=us&max=10&apikey=${API_KEY}`;}else{const category=topicToCategory[topic]||'general';url=`https://gnews.io/api/v4/top-headlines?topic=${category}&lang=en&country=us&max=10&apikey=${API_KEY}`;}const response=await fetch(url);const data=await response.json();console.log('GNews API Response:',data);if(data&&Array.isArray(data.articles)){const processedArticles=data.articles.map(article=>{var _article$source;return{title:article.title||'No Title',description:article.description||'No description available',url:article.url||'#',urlToImage:article.image||'https://via.placeholder.com/150',publishedAt:article.publishedAt||new Date().toISOString(),source:{name:((_article$source=article.source)===null||_article$source===void 0?void 0:_article$source.name)||'Unknown Source'}};});setNews(processedArticles);}else{console.error('Error in API response:',data.errors||data.message||'No articles found');setNews([]);}}catch(error){console.error('Failed to fetch news:',error);setNews([]);}finally{setLoading(false);}};const handleSearch=()=>{if(searchQuery.trim()){fetchNews(searchQuery);}};const handleTopicSelect=topic=>{setSelectedTopic(topic);setSearchQuery('');fetchNews(topic);};useEffect(()=>{console.log('API Key:',API_KEY);// Debugging: Check if the API key is loaded\nfetchNews(selectedTopic);},[selectedTopic]);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(Helmet,{children:[/*#__PURE__*/_jsx(\"title\",{children:\"AI News Aggregator - Latest News\"}),/*#__PURE__*/_jsx(\"meta\",{name:\"description\",content:\"Stay updated with the latest news.\"})]}),/*#__PURE__*/_jsx(\"div\",{className:\"dashboard\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-layout\",children:[/*#__PURE__*/_jsx(TopicSidebar,{onTopicSelect:handleTopicSelect,selectedTopic:selectedTopic,relatedArticles:news}),/*#__PURE__*/_jsxs(\"div\",{className:\"main-content\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"dashboard-header\",children:[/*#__PURE__*/_jsxs(\"h1\",{children:[\"Latest News - \",selectedTopic]}),/*#__PURE__*/_jsxs(\"div\",{className:\"search-container\",children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",placeholder:\"Search for news...\",value:searchQuery,onChange:e=>setSearchQuery(e.target.value),onKeyPress:e=>e.key==='Enter'&&handleSearch()}),/*#__PURE__*/_jsx(\"button\",{onClick:handleSearch,children:\"Search\"})]})]}),loading?/*#__PURE__*/_jsx(\"div\",{className:\"loader\",children:\"Loading...\"}):news.length>0?/*#__PURE__*/_jsx(NewsGrid,{articles:news}):/*#__PURE__*/_jsx(\"div\",{className:\"no-articles\",children:\"No articles available. Please try a different topic or search term.\"})]})]})})]});};export default Dashboard;","map":{"version":3,"names":["React","useState","useEffect","Helmet","NewsGrid","TopicSidebar","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","_ref","selectedLanguage","news","setNews","loading","setLoading","searchQuery","setSearchQuery","selectedTopic","setSelectedTopic","API_KEY","fetchNews","topic","url","topicToCategory","encodeURIComponent","category","response","fetch","data","json","console","log","Array","isArray","articles","processedArticles","map","article","_article$source","title","description","urlToImage","image","publishedAt","Date","toISOString","source","name","error","errors","message","handleSearch","trim","handleTopicSelect","children","content","className","onTopicSelect","relatedArticles","type","placeholder","value","onChange","e","target","onKeyPress","key","onClick","length"],"sources":["D:/cursor ai/smart assistance for productivity/client/src/components/Dashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Helmet } from 'react-helmet';\nimport NewsGrid from './NewsGrid';\nimport TopicSidebar from './TopicSidebar';\nimport './Dashboard.css';\n\nconst Dashboard = ({ selectedLanguage }) => {\n  const [news, setNews] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [searchQuery, setSearchQuery] = useState('');\n  const [selectedTopic, setSelectedTopic] = useState('Technology');\n\n  // Temporary hardcoded API key for testing\n  const API_KEY = '928dbbf6af0cb1e827f0c93aa9b70f1e';\n  const fetchNews = async (topic) => {\n    try {\n      setLoading(true);\n      let url;\n\n      const topicToCategory = {\n        'Technology': 'technology',\n        'Politics': 'world',\n        'Economy': 'business',\n        'Health': 'health',\n        'Environment': 'science',\n      };\n\n      if (searchQuery) {\n        url = `https://gnews.io/api/v4/search?q=${encodeURIComponent(searchQuery)}&lang=en&country=us&max=10&apikey=${API_KEY}`;\n      } else {\n        const category = topicToCategory[topic] || 'general';\n        url = `https://gnews.io/api/v4/top-headlines?topic=${category}&lang=en&country=us&max=10&apikey=${API_KEY}`;\n      }\n\n      const response = await fetch(url);\n      const data = await response.json();\n\n      console.log('GNews API Response:', data);\n\n      if (data && Array.isArray(data.articles)) {\n        const processedArticles = data.articles.map(article => ({\n          title: article.title || 'No Title',\n          description: article.description || 'No description available',\n          url: article.url || '#',\n          urlToImage: article.image || 'https://via.placeholder.com/150',\n          publishedAt: article.publishedAt || new Date().toISOString(),\n          source: {\n            name: article.source?.name || 'Unknown Source'\n          }\n        }));\n        setNews(processedArticles);\n      } else {\n        console.error('Error in API response:', data.errors || data.message || 'No articles found');\n        setNews([]);\n      }\n    } catch (error) {\n      console.error('Failed to fetch news:', error);\n      setNews([]);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSearch = () => {\n    if (searchQuery.trim()) {\n      fetchNews(searchQuery);\n    }\n  };\n\n  const handleTopicSelect = (topic) => {\n    setSelectedTopic(topic);\n    setSearchQuery('');\n    fetchNews(topic);\n  };\n\n  useEffect(() => {\n    console.log('API Key:', API_KEY); // Debugging: Check if the API key is loaded\n    fetchNews(selectedTopic);\n  }, [selectedTopic]);\n\n  return (\n    <>\n      <Helmet>\n        <title>AI News Aggregator - Latest News</title>\n        <meta name=\"description\" content=\"Stay updated with the latest news.\" />\n      </Helmet>\n      \n      <div className=\"dashboard\">\n        <div className=\"dashboard-layout\">\n          <TopicSidebar \n            onTopicSelect={handleTopicSelect}\n            selectedTopic={selectedTopic}\n            relatedArticles={news}\n          />\n          \n          <div className=\"main-content\">\n            <div className=\"dashboard-header\">\n              <h1>Latest News - {selectedTopic}</h1>\n              <div className=\"search-container\">\n                <input \n                  type=\"text\" \n                  placeholder=\"Search for news...\" \n                  value={searchQuery} \n                  onChange={(e) => setSearchQuery(e.target.value)}\n                  onKeyPress={(e) => e.key === 'Enter' && handleSearch()}\n                />\n                <button onClick={handleSearch}>Search</button>\n              </div>\n            </div>\n\n            {loading ? (\n              <div className=\"loader\">Loading...</div>\n            ) : news.length > 0 ? (\n              <NewsGrid articles={news} />\n            ) : (\n              <div className=\"no-articles\">No articles available. Please try a different topic or search term.</div>\n            )}\n          </div>\n        </div>\n      </div>\n    </>\n  );\n};\n\nexport default Dashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}